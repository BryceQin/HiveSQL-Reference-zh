<!-- TOC  -->
- [1. 内建运算符(Built-in Operators)](#1-内建运算符built-in-operators)
    - [1.1 运算符优先顺序(Operators Precedences)](#11-运算符优先顺序operators-precedences)
        - [1.1.1 元素选择(element selector, dot)](#111-元素选择element-selector-dot)
        - [1.1.2 一元前缀运算符(unary prefix operators)](#112-一元前缀运算符unary-prefix-operators)
        - [1.1.3 一元后缀(unary suffix)](#113-一元后缀unary-suffix)
        - [1.1.4 位异或(bitwise xor)](#114-位异或bitwise-xor)
        - [1.1.5 乘法类运算符(multiplicative operators)](#115-乘法类运算符multiplicative-operators)
        - [1.1.6 加法类运算符(additive operators)](#116-加法类运算符additive-operators)
        - [1.1.7 字符串连接(string concatenate)](#117-字符串连接string-concatenate)
        - [1.1.8 位与(bitwise and)](#118-位与bitwise-and)
        - [1.1.9 位或(bitwise or)](#119-位或bitwise-or)
    - [1.2 Relational Operators(关系运算符)](#12-relational-operators关系运算符)
    - [1.3 Arithmetic Operators(算数运算符)](#13-arithmetic-operators算数运算符)
    - [1.4 Logical Operators(逻辑运算符)](#14-logical-operators逻辑运算符)
    - [1.5 String Operators(字符串运算符)](#15-string-operators字符串运算符)
    - [1.6 Complex Type Constructors(复杂类型构造符)](#16-complex-type-constructors复杂类型构造符)
    - [1.7 Operators on Complex Types(复杂类型操作符)](#17-operators-on-complex-types复杂类型操作符)
- [2. 内建函数(Built-in Functions)](#2-内建函数built-in-functions)
    - [2.1 Mathematical Functions(数学函数)](#21-mathematical-functions数学函数)
    - [2.2 Collection Functions(集合函数)](#22-collection-functions集合函数)
    - [2.3 Type Conversion Functions(类型转换函数)](#23-type-conversion-functions类型转换函数)
    - [2.4 日期函数(Date Functions)](#24-日期函数date-functions)
        - [2.4.1 日期时间转换](#241-日期时间转换)
            - [2.4.1.1 `from_unixtime`](#2411-from_unixtime)
            - [2.4.1.2 `unix_timestamp`](#2412-unix_timestamp)
            - [2.4.1.3 `from_utc_timestamp`](#2413-from_utc_timestamp)
            - [2.4.1.4 `to_utc_timestamp`](#2414-to_utc_timestamp)
            - [2.4.1.5 `date_format`](#2415-date_format)
            - [2.4.1.6 `to_date`](#2416-to_date)
        - [2.4.2 获取日期时间中特定的部分](#242-获取日期时间中特定的部分)
            - [2.4.2.1 `year`](#2421-year)
            - [2.4.2.2 `quarter`](#2422-quarter)
            - [2.4.2.3 `month`](#2423-month)
            - [2.4.2.4 `day`, `dayofmonth`](#2424-day-dayofmonth)
            - [2.4.2.5 `hour`](#2425-hour)
            - [2.4.2.6 `minute`](#2426-minute)
            - [2.4.2.7 `second`](#2427-second)
            - [2.4.2.8 `weekofyear`](#2428-weekofyear)
            - [2.4.2.9 `extract`](#2429-extract)
        - [2.4.3 日期计算](#243-日期计算)
            - [2.4.3.1 `datediff`](#2431-datediff)
            - [2.4.3.2 `date_add`](#2432-date_add)
            - [2.4.3.3 `date_sub`](#2433-date_sub)
            - [2.4.3.4 `current_date`](#2434-current_date)
            - [2.4.3.5 `current_timestamp`](#2435-current_timestamp)
            - [2.4.3.6 `add_months`](#2436-add_months)
            - [2.4.3.7 `last_day`](#2437-last_day)
            - [2.4.3.8 `next_day`](#2438-next_day)
            - [2.4.3.9 `trunc`](#2439-trunc)
            - [2.4.3.10 `months_between`](#24310-months_between)
            - [2.4.3.11 `floor_year`](#24311-floor_year)
            - [2.4.3.12 `floor_quarter`](#24312-floor_quarter)
            - [2.4.3.13 `floor_month`](#24313-floor_month)
            - [2.4.3.14 `floor_week`](#24314-floor_week)
            - [2.4.3.15 `floor_day`](#24315-floor_day)
            - [2.4.3.16 `floor_hour`](#24316-floor_hour)
            - [2.4.3.17 `floor_minute`](#24317-floor_minute)
            - [2.4.3.18 `floor_second`](#24318-floor_second)
    - [2.5 Conditional Functions(条件函数)](#25-conditional-functions条件函数)
    - [2.6 字符串函数(String Functions)](#26-字符串函数string-functions)
        - [2.6.1 字符串格式化](#261-字符串格式化)
            - [2.6.1.1 `space`](#2611-space)
            - [2.6.1.2 `repeat`](#2612-repeat)
            - [2.6.1.3 `printf`](#2613-printf)
            - [2.6.1.4 `lower`](#2614-lower)
            - [2.6.1.5 `upper`](#2615-upper)
            - [2.6.1.6 `initcap`](#2616-initcap)
            - [2.6.1.7 `reverse`](#2617-reverse)
            - [2.6.1.8 `lpad`](#2618-lpad)
            - [2.6.1.9 `rpad`](#2619-rpad)
            - [2.6.1.10 `trim`](#26110-trim)
            - [2.6.1.11 `ltrim`](#26111-ltrim)
            - [2.6.1.12 `rtrim`](#26112-rtrim)
        - [2.6.2 字符串转化](#262-字符串转化)
            - [2.6.2.1 `ascii`](#2621-ascii)
            - [2.6.2.2 `chr`](#2622-chr)
            - [2.6.2.3 `binary`](#2623-binary)
            - [2.6.2.4 `encode`](#2624-encode)
            - [2.6.2.5 `decode`](#2625-decode)
        - [2.6.3 字符串长度](#263-字符串长度)
            - [2.6.3.1 `length`](#2631-length)
            - [2.6.3.2 `char_length, character_length`](#2632-char_length-character_length)
            - [2.6.3.3 `octet_length`](#2633-octet_length)
        - [2.6.4 字符串替换](#264-字符串替换)
            - [2.6.4.1 `replace`](#2641-replace)
            - [2.6.4.2 `translate`](#2642-translate)
            - [2.6.4.3 `mask`](#2643-mask)
            - [2.6.4.4 `mask_first_n`](#2644-mask_first_n)
            - [2.6.4.5 `mask_last_n`](#2645-mask_last_n)
            - [2.6.4.6 `mask_show_first_n`](#2646-mask_show_first_n)
            - [2.6.4.7 `mask_show_last_n`](#2647-mask_show_last_n)
        - [2.6.5 字符串截取、分割、拼接](#265-字符串截取分割拼接)
            - [2.6.5.1 `substr, substring`](#2651-substr-substring)
            - [2.6.5.2 `substring_index`](#2652-substring_index)
        - [2.6.6 字符串查找](#266-字符串查找)
        - [2.6.7 字符串相似性计算](#267-字符串相似性计算)
        - [2.6.8 正则表达式](#268-正则表达式)
        - [2.6.9 分词与词频统计](#269-分词与词频统计)
        - [2.6.10 特征值计算](#2610-特征值计算)
    - [2.7 Data Masking Functions(数据屏蔽函数)](#27-data-masking-functions数据屏蔽函数)
        - [2.7.1 `mask`](#271-mask)
        - [2.7.2 `mask_first_n`](#272-mask_first_n)
        - [2.7.3 `mask_last_n`](#273-mask_last_n)
        - [2.7.4 `mask_show_first_n`](#274-mask_show_first_n)
        - [2.7.5 `mask_show_last_n`](#275-mask_show_last_n)
        - [2.7.6 `mask_hash`](#276-mask_hash)
    - [2.8 Misc. Functions(杂项函数)](#28-misc-functions杂项函数)
        - [2.8.1 xpath](#281-xpath)
        - [2.8.2 get\_json\_object](#282-get_json_object)
- [3. Built-in Aggregate Functions(UDAF)(聚合函数)](#3-built-in-aggregate-functionsudaf聚合函数)
- [4. Built-in Table-Generating Functions(UDTF)(表生成函数)](#4-built-in-table-generating-functionsudtf表生成函数)
    - [4.1 Usage Examples](#41-usage-examples)
        - [4.1.1 explode (array)](#411-explode-array)
        - [4.1.2 explode (map)](#412-explode-map)
        - [4.1.3 posexplode (array)](#413-posexplode-array)
        - [4.1.4 inline (array of structs)](#414-inline-array-of-structs)
        - [4.1.5 stack (values)](#415-stack-values)
    - [4.2 explode](#42-explode)
    - [4.3 posexplode](#43-posexplode)
    - [4.4 json\_tuple](#44-json_tuple)
    - [4.5 parse\_url\_tuple](#45-parse_url_tuple)
- [5. 常数及常数生成函数](#5-常数及常数生成函数)
    - [5.1 常数](#51-常数)
        - [5.1.1 `true`](#511-true)
        - [5.1.2 `false`](#512-false)
        - [5.1.3 `e`](#513-e)
        - [5.1.4 `pi`](#514-pi)
    - [5.2 常数生成函数](#52-常数生成函数)
        - [5.2.1 `current_date`](#521-current_date)
        - [5.2.2 `current_timestamp`](#522-current_timestamp)
        - [5.2.3 `current_groups`](#523-current_groups)
        - [5.2.4 `current_user`](#524-current_user)
        - [5.2.5 `current_database`](#525-current_database)
        - [5.2.6 `current_authorizer`](#526-current_authorizer)
        - [5.2.7 `logged_in_user`](#527-logged_in_user)
        - [5.2.8 `version`](#528-version)
        - [5.2.9 `uuid`](#529-uuid)
        - [5.2.10 `restrict_information_schema`](#5210-restrict_information_schema)
<!-- /TOC -->
# 1. 内建运算符(Built-in Operators)
## 1.1 运算符优先顺序(Operators Precedences)
### 1.1.1 元素选择(element selector, dot)
```sql
语法:
    bracket_op([]);
    dot(.)
举例：
    A[B];
    A.identifier
```
### 1.1.2 一元前缀运算符(unary prefix operators)
```sql
语法:
    unary(+);
    unary(-);
    unary(~)
举例：
    -A
```
### 1.1.3 一元后缀(unary suffix)
```sql
语法:
    IS [NOT] (NULL|TRUE|FALSE)
举例：
    A IS NULL
```
### 1.1.4 位异或(bitwise xor)
```sql
语法:
    bitwise xor(^)
举例：
    A ^ B
```
### 1.1.5 乘法类运算符(multiplicative operators)
```sql
语法:
    star(*);
    divide(/);
    mod(%);
    div(DIV)
举例：
    A * B
```
### 1.1.6 加法类运算符(additive operators)
```sql
语法:
    plus(+)；
    minus(-)
举例：
    A + B
```
### 1.1.7 字符串连接(string concatenate)
```sql
语法:
    string concatenate(||)
举例：
    A || B
```
### 1.1.8 位与(bitwise and)
```sql
语法:
    bitwise and(&)
举例：
    A & B
```
### 1.1.9 位或(bitwise or)
```sql
语法:
    bitwise or(|)
举例：
    A | B
```
## 1.2 Relational Operators(关系运算符)
## 1.3 Arithmetic Operators(算数运算符)
## 1.4 Logical Operators(逻辑运算符)
## 1.5 String Operators(字符串运算符)
## 1.6 Complex Type Constructors(复杂类型构造符)
## 1.7 Operators on Complex Types(复杂类型操作符)
# 2. 内建函数(Built-in Functions)
## 2.1 Mathematical Functions(数学函数)
## 2.2 Collection Functions(集合函数)
## 2.3 Type Conversion Functions(类型转换函数)
## 2.4 日期函数(Date Functions)
### 2.4.1 日期时间转换
#### 2.4.1.1 `from_unixtime`
```sql
描述：
    UNIX时间戳转日期函数
语法：
    from_unixtime(unixtime[, format])
参数类型：
    unixtime: bigint
    format: string
返回值类型：
    string
说明：
    转化UNIX时间戳到当前时区的时间格式
举例：
    select from_unixtime(1688718148,'yyyyMMdd')
    结果：20211105
```
补充：<br>
1. 如果`format`为空，则默认为`yyyy-MM-dd HH:mm:ss`
2. `format`参数的格式参考：[Java SimpleDateFormat](https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)
#### 2.4.1.2 `unix_timestamp`
```sql
描述：
    日期转UNIX时间戳函数
语法：
    unix_timestamp([date [, pattern]])
参数类型：
    date: timestamp|date
    pattern: string
返回值类型：
    bigint
说明：
    将指定格式的日期转化为UNIX时间戳(从 1970-01-01 00:00:00 UTC 到指定时间的秒数)
举例：
    select unix_timestamp('2023-07-10 09:42:00','yyyy-MM-dd HH:mm:ss')
    结果：1688953320
```
补充：<br>
1. 如果`date`为空，则返回当前时间的UNIX时间戳, 在2.0版本后废弃，使用[`current_timestamp()`](#2410-current_timestamp)代替
2. 如果`pattern`为空，则默认为`yyyy-MM-dd HH:mm:ss`
3. `pattern`参数的格式参考：[Java SimpleDateFormat](https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)
#### 2.4.1.3 `from_utc_timestamp`
```sql
描述：
    UTC时间戳转日期函数
语法：
    from_utc_timestamp(timestamp, timezone)
参数类型：
    timestamp: timestamp|date, tinyint|smallint|int|bigint, float|double|decimal
    timezone: string
返回值类型：
    timestamp
说明：
    如果给定的时间戳并非UTC，则将其转化成指定的时区下时间戳
举例：
        select to_utc_timestamp(1689058991557,'PRC')
    结果：'2023-07-11 23:03:11'
    select to_utc_timestamp('2023-07-11 15:03:11','PRC')
    结果：'2023-07-11 23:03:11'
```
#### 2.4.1.4 `to_utc_timestamp`
```sql
描述：
    日期时间转UTC时间戳函数
语法：
    to_utc_timestamp(timestamp, timezone)
参数类型：
    timestamp: timestamp|date, tinyint|smallint|int|bigint, float|double|decimal
    timezone: string
返回值类型：
    timestamp
说明：
    指定的时区下的时间戳，则将其转化成UTC下的时间戳
举例：
    select to_utc_timestamp(1689058991557,'PRC')
    结果：'2023-07-11 07:03:11'
    select to_utc_timestamp('2023-07-11 15:03:11','PRC')
    结果：'2023-07-11 07:03:11'
```
#### 2.4.1.5 `date_format`
```sql
描述：
    日期时间格式化函数
语法：
    date_format(timestamp, fmt)
参数类型：
    timestamp: timestamp|date
    fmt: string
返回值类型：
    string
说明：
    返回指定格式的日期时间字符串
举例：
    select date_format('2023-07-11 15:03:11','yyyy-MM-dd')
    结果：'2023-07-11 15:03:11'
```
补充：
1. `fmt`参数的格式参考：[Java DateTimeFormatter](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)
#### 2.4.1.6 `to_date`
```sql
描述：
    日期时间转日期函数
语法：
    to_date(timestamp)
参数类型：
    timestamp: timestamp|date
返回值类型：
    string(2.1.0之前)
    date(2.1.0及之后)
说明：
    返回日期时间字段中的日期部分
举例：
    select to_date('2023-07-10 09:42:00')
    结果：2023-07-10
```
### 2.4.2 获取日期时间中特定的部分
#### 2.4.2.1 `year`
```sql
描述：
    日期时间转年份函数
语法：
    year(date)
参数类型：
    date: timestamp|date
返回值类型：
    int
说明：
    返回日期时间字段中的年份部分
举例：
    select year('2023-07-10 09:42:00')
    结果：2023
    select year('2023-07-10')
    结果：2023

```
#### 2.4.2.2 `quarter`
```sql
描述：
    日期时间转季度函数
语法：
    quarter(date)
参数类型：
    date: timestamp|date
返回值类型：
    int
说明：
    返回日期时间字段中的季度部分
举例：
    select quarter('2023-07-10 09:42:00')
    结果：3
    select quarter('2023-07-10')
    结果：3
```
#### 2.4.2.3 `month`
```sql
描述：
    日期时间转月份函数
语法：
    month(timestamp|date)
参数类型：
    date: timestamp|date
返回值类型：
    int
说明：
    返回日期时间字段中的月份部分
举例：
    select month('2023-07-10 09:42:00')
    结果：7
    select month('2023-07-10')
    结果：7
```
#### 2.4.2.4 `day`, `dayofmonth`
```sql
描述：
    日期时间转天函数
语法：
    day(timestamp|date),
    dayofmonth(timestamp|date)
参数类型：
    date: timestamp|date
返回值类型：
    int
说明：
    返回日期时间字段中的天部分
举例：
    select day('2023-07-10 09:42:00')
    结果：10
    select day('2023-07-10')
    结果：10
    select dayofmonth('2023-07-10 09:42:00')
    结果：10
    select dayofmonth('2023-07-10')
    结果：10
```
#### 2.4.2.5 `hour`
```sql
描述：
    日期时间转小时函数
语法：
    hour(timestamp)
参数类型：
    timestamp: timestamp
返回值类型：
    int
说明：
    返回日期时间字段中的小时部分
举例：
    select hour('2023-07-10 09:42:00')
    结果：9
```
#### 2.4.2.6 `minute`
```sql
描述：
    日期时间转分钟函数
语法：
    minute(timestamp)
参数类型：
    timestamp: timestamp
返回值类型：
    int
说明：
    返回日期时间字段中的分钟部分
举例：
    select minute('2023-07-10 09:42:00')
    结果：42
```
#### 2.4.2.7 `second`
```sql
描述：
    日期时间转秒函数
语法：
    second(timestamp)
参数类型：
    timestamp: timestamp
返回值类型：
    int
说明：
    返回日期时间字段中的秒部分
举例：
    select second('2023-07-10 09:42:00')
    结果：0
```
#### 2.4.2.8 `weekofyear`
```sql
描述：
    日期时间转年中周函数
语法：
    weekofyear(date)
参数类型：
    date: timestamp|date
返回值类型：
    int
说明：
    返回日期时间字段中的年中周部分
举例：
    select weekofyear('2023-01-01 09:42:00')
    结果：52
    select weekofyear('2019-12-31')
    结果：1
```
补充：
1. 一周的第一天是星期一
2. 如果当前年的第一个周，天数超过3天，那就是当前年的第一周。
3. 如果当前年的第一个周，天数小于等于3天，那就是上一年的最后一周。
#### 2.4.2.9 `extract`
```sql
描述：
    日期时间转指定部分函数
语法：
    extract(field FROM source)
参数类型：
    field: string
    source: timestamp|date/interval
返回值类型：
    int
说明：
    返回日期时间字段中的指定部分
    field取值包括：day, dayofweek, hour, minute, month, quarter, second, week, year
举例：
    select extract(month from "2023-07-10")
    结果：7
    select extract(month from interval '1-3' year to month)
    结果：3
```
### 2.4.3 日期计算
#### 2.4.3.1 `datediff`
```sql
描述：
    日期时间差函数
语法：
    datediff(enddate, startdate)
参数类型：
    enddate: date|timestamp
    startdate: date|timestamp
返回值类型：
    int
说明：
    返回结束日期减去开始日期的天数
举例：
    select datediff('2023-07-10','2023-07-01')
    结果：9
    select datediff('2023-07-10 01:10:22','2023-06-01 09:20:23')
    结果：38
```
#### 2.4.3.2 `date_add`
```sql
描述：
    日期时间加函数
语法：
    date_add(startdate, num_days)
参数类型：
    startdate: date|timestamp
    num_days: int|tinyint|smallint
返回值类型：
    string(2.1.0之前)
    date(2.1.0及之后)
说明：
    返回开始日期加上指定天数后的日期
举例：
    select date_add('2023-07-10',1)
    结果：'2023-07-11'
```
#### 2.4.3.3 `date_sub`
```sql
描述：
    日期时间减函数
语法：
    date_sub(startdate, num_days)
参数类型：
    startdate: date|timestamp
    num_days: int|tinyint|smallint
返回值类型：
    string(2.1.0之前)
    date(2.1.0及之后)
说明：
    返回开始日期减去指定天数后的日期
举例：
    select date_sub('2023-07-10',1)
    结果：'2023-07-09'
```

#### 2.4.3.4 `current_date`
```sql
描述：
    当前日期函数
语法：
    current_date()、current_date
参数类型：
    无
返回值类型：
    date
说明：
    返回当前日期。是开始执行查询的日期，同一个查询中，返回值相同
举例：
    select current_date()
    结果：'2023-07-11'
```
#### 2.4.3.5 `current_timestamp`
```sql
描述：
    当前时间函数
语法：
    current_timestamp()、current_timestamp
参数类型：
    无
返回值类型：
    timestamp
说明：
    返回当前时间。是开始执行查询的时间，同一个查询中，返回值相同
举例：
    select current_timestamp()
    结果：'2023-07-11 15:03:11'
```
#### 2.4.3.6 `add_months`
```sql
描述：
    日期时间加月份函数
语法：
    add_months(start_date, num_months [, date_format])
参数类型：
    start_date: date/timestamp
    num_months: int/tinyint/smallint
    date_format: string
返回值类型：
    string
说明：
    返回开始日期加上指定月份后的日期。
举例：
    select add_months('2023-08-31',1)
    结果：'2023-09-30'
```
补充：
1. 在4.0.0版本之前，时间部分会被截断，4.0.0版本及之后，可以提供一个日期格式作为返回值，允许保留时间部分。
2. 如果开始时间是月份最后一天，或者开始时间的月份天数大于结束时间的月份的最大天数，那么返回的日期是结束时间的月份最后一天；其他情况下开始时间和结束时间的天数一样。
#### 2.4.3.7 `last_day`
```sql
描述：
    月份最后一天函数
语法：
    last_day(date)
参数类型：
    date: date/timestamp
返回值类型：
    string
说明：
    返回指定日期所在月份的最后一天。时间部分会被截断。
举例：
    select last_day('2023-07-11')
    结果：'2023-07-31'
```
#### 2.4.3.8 `next_day`
```sql
描述：
    下一个星期函数
语法：
    next_day(date, day_of_week)
参数类型：
    date: date/timestamp
    day_of_week: string
返回值类型：
    string
说明：
    返回当前时间的下一个星期X所对应的日期。时间部分会被截断。
举例：
    select next_day('2023-07-11','SUN')
    结果：'2023-07-16'
```
补充：<br>
1. `day_of_week`参数可以取2字母简写、3字母简写或全拼，如Mo, tue, FRIDAY<br>
#### 2.4.3.9 `trunc`
```sql
描述：
    日期时间截断函数
语法：
    trunc(date, format)
参数类型：
    date: date/timestamp
    format: string
返回值类型：
    string
说明：
    返回时间的最开始年份或月份如。时间部分会被截断。
举例：
    select trunc('2023-07-11 15:03:11','MM')
    结果：'2023-07-01'
```
补充：
1. `format`参数可以取`'YEAR'/'YYYY'/'YY'`, `'MONTH'/'MON'/'MM'`
#### 2.4.3.10 `months_between`
```sql
描述：
    月份差函数
语法：
    months_between(timestamp1, timestamp2)
参数类型：
    timestamp1: timestamp|date
    timestamp2: timestamp|date
返回值类型：
    double
说明：
    返回两个日期之间的月份差。如果`timestamp1`在`timestamp2`之前，返回值为正数，否则为负数。
举例：
    select months_between('2023-07-11','2023-07-01')
    结果：0.32258065
```
补充：
1. 如果`timestamp1`和`timestamp2`天数一样或都是月份最后一天，返回值为整数，否则，返回8位小数，以每月31天为基础计算。
#### 2.4.3.11 `floor_year`
```sql
描述：
    日期向下取整函数，精确到年份
语法：
    floor_year(timestamp)
参数类型：
    timestamp: timestamp
返回值类型：
    timestamp
说明：
    返回指定日期向下取整后的日期，精确到年份。
举例：
    select floor_year(cast('2023-07-11 15:03:11' as timestamp))
    结果：'2023-01-01 00:00:00'
```
#### 2.4.3.12 `floor_quarter`
```sql
描述：
    日期向下取整函数，精确到季度
语法：
    floor_quarter(timestamp)
参数类型：
    timestamp: timestamp
返回值类型：
    timestamp
说明：
    返回指定日期向下取整后的日期，精确到季度。
举例：
    select floor_quarter(cast('2023-06-11 15:03:11' as timestamp))
    结果：'2023-04-01 00:00:00'
```
#### 2.4.3.13 `floor_month`
```sql
描述：
    日期向下取整函数，精确到月份
语法：
    floor_month(timestamp)
参数类型：
    timestamp: timestamp
返回值类型：
    timestamp
说明：
    返回指定日期向下取整后的日期，精确到月份。
举例：
    select floor_month(cast('2023-07-11 15:03:11' as timestamp))
    结果：'2023-07-01 00:00:00'
```
#### 2.4.3.14 `floor_week`
```sql
描述：
    日期向下取整函数，精确到周
语法：
    floor_week(timestamp)
参数类型：
    timestamp: timestamp
返回值类型：
    timestamp
说明：
    返回指定日期向下取整后的日期，精确到周。周一是第一天。
举例：
    select floor_week(cast('2023-07-11 15:03:11' as timestamp))
    结果：'2023-07-10 00:00:00'
```
#### 2.4.3.15 `floor_day`
```sql
描述：
    日期向下取整函数，精确到天
语法：
    floor_day(timestamp)
参数类型：
    timestamp: timestamp
返回值类型：
    timestamp
说明：
    返回指定日期向下取整后的日期，精确到天。
举例：
    select floor_day(cast('2023-07-11 15:03:11' as timestamp))
    结果：'2023-07-11 00:00:00'
```
#### 2.4.3.16 `floor_hour`
```sql
描述：
    日期向下取整函数，精确到小时
语法：
    floor_hour(timestamp)
参数类型：
    timestamp: timestamp
返回值类型：
    timestamp
说明：
    返回指定日期向下取整后的日期，精确到小时。
举例：
    select floor_hour(cast('2023-07-11 15:03:11' as timestamp))
    结果：'2023-07-11 15:00:00'
```
#### 2.4.3.17 `floor_minute`
```sql
描述：
    日期向下取整函数，精确到分钟
语法：
    floor_minute(timestamp)
参数类型：
    timestamp: timestamp
返回值类型：
    timestamp
说明：
    返回指定日期向下取整后的日期，精确到分钟。
举例：
    select floor_minute(cast('2023-07-11 15:03:11' as timestamp))
    结果：'2023-07-11 15:03:00'
```
#### 2.4.3.18 `floor_second`
```sql
描述：
    日期向下取整函数，精确到秒
语法：
    floor_second(timestamp)
参数类型：
    timestamp: timestamp
返回值类型：
    timestamp
说明：
    返回指定日期向下取整后的日期，精确到秒。
举例：
    select floor_second(cast('2023-07-11 15:03:11.123' as timestamp))
    结果：'2023-07-11 15:03:11'
```
## 2.5 Conditional Functions(条件函数)
## 2.6 字符串函数(String Functions)
### 2.6.1 字符串格式化
#### 2.6.1.1 `space`
```sql
描述：
    空格生成函数
语法：
    space(int n)
参数类型：
    n: int
返回值类型：
    string
说明：
    返回n个空格组成的字符串
举例：
    select space(3)
    结果：'   '
```
#### 2.6.1.2 `repeat`
```sql
描述：
    字符串重复函数
语法：
    repeat(string str, int n)
参数类型：
    str: string
    n: int
返回值类型：
    string
说明：
    返回n个str字符串组成的字符串
举例：
    select repeat('abc',3)
    结果：'abcabcabc'
```
#### 2.6.1.3 `printf`
```sql
描述：
    字符串格式化函数
语法：
    printf(string format, obj obj1, obj obj2, ...)
参数类型：
    format: string
    obj: string/int/float|double|decimal
返回值类型：
    string
说明：
    返回格式化后的字符串。按照C语言printf函数的模式生成字符串。
举例：
    select printf("%d-%s", 2023, '03')
    结果：'2023-03'
```
#### 2.6.1.4 `lower`
```sql
描述：
    字符串转小写函数
语法：
    lower(string)
参数类型：
    string: string
返回值类型：
    string
说明：
    返回字符串的小写形式
举例：
    select lower('ABC')
    结果：'abc'
```
#### 2.6.1.5 `upper`
```sql
描述：
    字符串转大写函数
语法：
    upper(string)
参数类型：
    string: string
返回值类型：
    string
说明：
    返回字符串的大写形式
举例：
    select upper('abc')
    结果：'ABC'
```
#### 2.6.1.6 `initcap`
```sql
描述：
    字符串首字母大写函数
语法：
    initcap(string)
参数类型：
    string: string
返回值类型：
    string
说明：
    返回字符串的首字母大写形式。单词以空白格分割。
举例：
    select initcap('abc def')
    结果：'Abc Def'
```
#### 2.6.1.7 `reverse`
```sql
描述：
    字符串反转函数
语法：
    reverse(string)
参数类型：
    string: string
返回值类型：
    string
说明：
    返回字符串的反转形式
举例：
    select reverse('abc')
    结果：'cba'
```
#### 2.6.1.8 `lpad`
```sql
描述：
    字符串左补齐函数
语法：
    lpad(string str, int len, string pad)
参数类型：
    str: string
    len: int
    pad: string
返回值类型：
    string
说明：
    将字符串长度调整为n，不足时在左侧添加指定字符串，超出时截取前n个字符。如果pad为空，则返回null。
举例：
    select lpad('abc', 5, '-')
    结果：'--abc'
```
#### 2.6.1.9 `rpad`
```sql
描述：
    字符串右补齐函数
语法：
    rpad(string str, int len, string pad)
参数类型：
    str: string
    len: int
    pad: string
返回值类型：
    string
说明：
    将字符串长度调整为n，不足时在右侧添加指定字符串，超出时截取前n个字符。如果pad为空，则返回null。
举例：
    select rpad('abc', 5, '-')
    结果：'abc--'
```
#### 2.6.1.10 `trim`
```sql
描述：
    字符串前后空格去除函数
语法：
    trim(string str)
参数类型：
    str: string
返回值类型：
    string
说明：
    去除字符串前后的空格
举例：
    select trim(' abc ')
    结果：'abc'
```
#### 2.6.1.11 `ltrim`
```sql
描述：
    字符串左侧空格去除函数
语法：
    ltrim(string str)
参数类型：
    str: string
返回值类型：
    string
说明：
    去除字符串左侧的空格
举例：
    select ltrim(' abc ')
    结果：'abc '
```
#### 2.6.1.12 `rtrim`
```sql
描述：
    字符串右侧空格去除函数
语法：
    rtrim(string str)
参数类型：
    str: string
返回值类型：
    string
说明：
    去除字符串右侧的空格
举例：
    select rtrim(' abc ')
    结果：' abc'
```
### 2.6.2 字符串转化
#### 2.6.2.1 `ascii`
```sql
描述：
    字符串转ASCII码函数
语法：
    ascii(string)
参数类型：
    string: string
返回值类型：
    int
说明：
    返回字符串的第一个字符的ASCII码
举例：
    select ascii('abc')
    结果：97
```
#### 2.6.2.2 `chr`
```sql
描述：
    ASCII码转字符串函数
语法：
    chr(n)
参数类型：
    n: int|bigint|double
返回值类型：
    string
说明：
    返回ASCII码对应的字符。如果n大于256，则等于n对256取余后的结果。
举例：
    select chr(97)
    结果：'a'
```
#### 2.6.2.3 `binary`
```sql
描述：
    字符串转字节函数
语法：
    binary(string)
参数类型：
    string: string
返回值类型：
    binary
说明：
    返回字符串的二进制字节表示
举例：
    select binary('abc')
    结果：hex("969798")
```
#### 2.6.2.4 `encode`
```sql
描述：
    字符串转字节函数
语法：
    encode(string str, string charset)
参数类型：
    str: string
    charset: string
返回值类型：
    binary
说明：
    返回字符串的二进制字节表示。charset取值为'US-ASCII', 'ISO-8859-1', 'UTF-8', 'UTF-16BE', 'UTF-16LE', 'UTF-16'。
举例：
    select encode('abc','ascii')
    结果：hex("969798")
```
#### 2.6.2.5 `decode`
```sql
描述：
    字节转字符串函数
语法：
    decode(binary bin, string charset)
参数类型：
    bin: binary
    charset: string
返回值类型：
    string
说明：
    返回二进制字节表示的字符串。charset取值为'US-ASCII', 'ISO-8859-1', 'UTF-8', 'UTF-16BE', 'UTF-16LE', 'UTF-16'。
举例：
    select decode(binary('abc'),'ascii')
    结果：'abc'
```
### 2.6.3 字符串长度
#### 2.6.3.1 `length`
```sql
描述：
    字符串长度函数
语法：
    length(string)
参数类型：
    string: string
返回值类型：
    int
说明：
    返回字符串的长度
举例：
    select length('你好')
    结果：2
```
#### 2.6.3.2 `char_length, character_length`
```sql
描述：
    字符串长度函数
语法：
    char_length(string)
参数类型：
    string: string
返回值类型：
    int
说明：
    返回字符串的中`UTF-8`字符长度
举例：
    select char_length('你好')
    结果：2
```
#### 2.6.3.3 `octet_length`
```sql
描述：
    字符串字节长度函数
语法：
    octet_length(string)
参数类型：
    string: string
返回值类型：
    int
说明：
    返回字符串的字节长度
举例：
    select octet_length('你好')
    结果：6
```
### 2.6.4 字符串替换
#### 2.6.4.1 `replace`
```sql
描述：
    字符串替换函数
语法：
    replace(string str, string OLD, string NEW)
参数类型：
    str: string
    OLD: string
    NEW: string
返回值类型：
    string
说明：
    将字符串中的OLD替换成NEW
举例：
    select replace('ababab', 'abab', 'Z')
    结果：'Zab'
```
#### 2.6.4.2 `translate`
```sql
描述：
    字符串替换函数
语法：
    translate(input, from, to)
参数类型：
    input: string|char|varchar
    from: string|char|varchar
    to: string|char|varchar
返回值类型：
    string
说明：
    将字符串中的某些字符逐一替换为对应的字符。任意参数为null时，返回null。
举例：
    select translate("abc", "ac", "13")
    结果：'1b3'
```
#### 2.6.4.3 [`mask`](#271-mask)
#### 2.6.4.4 [`mask_first_n`](#272-mask_first_n)
#### 2.6.4.5 [`mask_last_n`](#273-mask_last_n)
#### 2.6.4.6 [`mask_show_first_n`](#274-mask_show_first_n)
#### 2.6.4.7 [`mask_show_last_n`](#275-mask_show_last_n)
### 2.6.5 字符串截取、分割、拼接
#### 2.6.5.1 `substr, substring`
```sql
描述：
    字符串截取函数
语法：
    substr(string str, int start[, int len])
    substring(string str, int start[, int len])
参数类型：
    str: string|binary
    start: int
    len: int
返回值类型：
    string
说明：
    返回字符串从start位置开始，长度为len的子串。如果没有len参数，则从start位置开始，截取到字符串末尾。start为负数时，从字符串末尾开始计算。
举例：
    select substr('abc', 2)
    结果：'bc'
    select substr('abc', 2, 1)
    结果：'b'
```
#### 2.6.5.2 `substring_index`
```sql
描述：
    字符串截取函数
语法：
    substring_index(string str, string delim, int count)
参数类型：
    str: string
    delim: string
    count: int
返回值类型：
    string
说明：
    返回字符串从左侧开始，第count个delim分隔符之前的子串。如果count为负数，则从右侧开始计算。
举例：
    select substring_index('abc,def,ghi', ',', 2)
    结果：'abc,def'
    select substring_index('abc,def,ghi', ',', -2)
    结果：'def,ghi'
```
### 2.6.6 字符串查找
### 2.6.7 字符串相似性计算
### 2.6.8 正则表达式
### 2.6.9 分词与词频统计
### 2.6.10 特征值计算


## 2.7 Data Masking Functions(数据屏蔽函数)
### 2.7.1 `mask`
```sql
描述：
    数据屏蔽函数，也可以用作字符串替换
语法：
    mask(string str[, upper[, lower[, number[, other]]]])
参数类型：
    str: string
    upper: string| -1
    lower: string| -1
    number: string| -1
    other: string| -1
返回值类型：
    string
说明：
    返回屏蔽后的字符串。在默认情况下大写字母被替换成X，小写字母被替换成x，数字被替换成n，其他字符不变。uppper、lower、number、other取值为-1时，表示保留原字符。
举例：
    select mask("2021+03.04", -1, -1, -1, '-')
    结果：'2021-03-04'
```
### 2.7.2 `mask_first_n`
```sql
描述：
    数据屏蔽函数，也可以用作字符串替换。将某个字符串前n个字符中的各个部分，替换为指定字符。
语法：
    mask_first_n(string str, int n[, upper[, lower[, number[, other]]]])
参数类型：
    str: string
    n: int
    upper: string| -1
    lower: string| -1
    number: string| -1
    other: string| -1
返回值类型：
    string
说明：
    返回屏蔽后的字符串。在默认情况下大写字母被替换成X，小写字母被替换成x，数字被替换成n，其他字符不变。uppper、lower、number、other取值为-1时，表示保留原字符。
举例：
    select mask_first_n("2021+03.04", 7, -1, -1, -1, '-')
    结果：'2021-03.04'
```
### 2.7.3 `mask_last_n`
```sql
描述：
    数据屏蔽函数，也可以用作字符串替换。将某个字符串后n个字符中的各个部分，替换为指定字符。
语法：
    mask_last_n(string str, int n[, upper[, lower[, number[, other]]]])
参数类型：
    str: string
    n: int
    upper: string| -1
    lower: string| -1
    number: string| -1
    other: string| -1
返回值类型：
    string
说明：
    返回屏蔽后的字符串。在默认情况下大写字母被替换成X，小写字母被替换成x，数字被替换成n，其他字符不变。uppper、lower、number、other取值为-1时，表示保留原字符。
举例：
    select mask_last_n("2021+03.04", 3, -1, -1, -1, '-')
    结果：'2021+03-04'
```
### 2.7.4 `mask_show_first_n`
```sql
描述：
    数据屏蔽函数，也可以用作字符串替换。将某个字符串前n个字符除外的各个部分，替换为指定字符。
语法：
    mask_show_first_n(string str, int n[, upper[, lower[, number[, other]]]])
参数类型：
    str: string
    n: int
    upper: string| -1
    lower: string| -1
    number: string| -1
    other: string| -1
返回值类型：
    string
说明：
    返回屏蔽后的字符串。在默认情况下大写字母被替换成X，小写字母被替换成x，数字被替换成n，其他字符不变。uppper、lower、number、other取值为-1时，表示保留原字符。
举例：
    select mask_show_first_n("2021+03.04", 7, -1, -1, -1, '-')
    结果：'2021+03-04'
```
### 2.7.5 `mask_show_last_n`
```sql
描述：
    数据屏蔽函数，也可以用作字符串替换。将某个字符串后n个字符除外的各个部分，替换为指定字符。
语法：
    mask_show_last_n(string str, int n[, upper[, lower[, number[, other]]]])
参数类型：
    str: string
    n: int
    upper: string| -1
    lower: string| -1
    number: string| -1
    other: string| -1
返回值类型：
    string
说明：
    返回屏蔽后的字符串。在默认情况下大写字母被替换成X，小写字母被替换成x，数字被替换成n，其他字符不变。uppper、lower、number、other取值为-1时，表示保留原字符。
举例：
    select mask_show_last_n("2021+03.04", 3, -1, -1, -1, '-')
    结果：'2021-03.04'
```
### 2.7.6 `mask_hash`
```sql
描述：
    数据屏蔽函数，返回字符串的hash值。
语法：
    mask_hash(str)
参数类型：
    str: string|char|varchar
返回值类型：
    string
说明：
    返回字符串的hash值。如果str为非字符串类型，则返回null。返回值是固定的，可以用作join条件。
举例：
    select mask_hash("你好")
    结果：'670d9743542cae3ea7ebe36af56bd53648b0a1126162e78d81a32934a711302e'
```
## 2.8 Misc. Functions(杂项函数)
### 2.8.1 xpath
### 2.8.2 get_json_object
# 3. Built-in Aggregate Functions(UDAF)(聚合函数)
# 4. Built-in Table-Generating Functions(UDTF)(表生成函数)
## 4.1 Usage Examples
### 4.1.1 explode (array)
### 4.1.2 explode (map)
### 4.1.3 posexplode (array)
### 4.1.4 inline (array of structs)
### 4.1.5 stack (values)
## 4.2 explode
## 4.3 posexplode
## 4.4 json_tuple
## 4.5 parse_url_tuple
# 5. 常数及常数生成函数
## 5.1 常数
### 5.1.1 `true`
```sql
描述：
    布尔值true
语法：
    true
参数类型：
    无
返回值类型：
    boolean
说明：
    返回布尔值true
举例：
    select true
    结果：true
```
### 5.1.2 `false`
```sql
描述：
    布尔值false
语法：
    false
参数类型：
    无
返回值类型：
    boolean
说明：
    返回布尔值false
举例：
    select false
    结果：false
```
### 5.1.3 `e`
```sql
描述：
    自然对数的底数
语法：
    e()
参数类型：
    无
返回值类型：
    double
说明：
    返回自然对数的底数
举例：
    select e()
    结果：2.718281828459045
```
### 5.1.4 `pi`
```sql
描述：
    圆周率
语法：
    pi()
参数类型：
    无
返回值类型：
    double
说明：
    返回圆周率
举例：
    select pi()
    结果：3.141592653589793
```
## 5.2 常数生成函数
### 5.2.1 `current_date`
见[`current_date`](#2434-current_date)
### 5.2.2 `current_timestamp`
见[`current_timestamp`](#2435-current_timestamp)
### 5.2.3 `current_groups`
```sql
描述：
    当前用户所属组函数
语法：
    current_groups()
参数类型：
    无
返回值类型：
    array<string>
说明：
    返回当前系统中的所有用户组名称构成的列表
举例：
    select current_groups()
    结果：['hive','ficommon']
```
### 5.2.4 `current_user`
```sql
描述：
    当前用户函数
语法：
    current_user()
参数类型：
    无
返回值类型：
    string
说明：
    返回当前用户名称
举例：
    select current_user()
    -- 返回值取决于当前用户
    结果：'xxx'
```
### 5.2.5 `current_database`
```sql
描述：
    当前数据库函数
语法：
    current_database()
参数类型：
    无
返回值类型：
    string
说明：
    返回当前使用的数据库名称
举例：
    select current_database()
    -- 返回值取决于当前数据库
    结果：'xxx'
```
### 5.2.6 `current_authorizer`
```sql
描述：
    当前授权用户函数
语法：
    current_authorizer()
参数类型：
    无
返回值类型：
    string
说明：
    返回当前Hive授权者的名称
举例：
    select current_authorizer()
    -- 返回值取决于当前授权者
    结果：'xxx'
```
### 5.2.7 `logged_in_user`
```sql
描述：
    当前登录用户函数
语法：
    logged_in_user()
参数类型：
    无
返回值类型：
    string
说明：
    返回当前登录用户的名称
举例：
    select logged_in_user()
    -- 返回值取决于当前登录用户
    结果：'xxx'
```
### 5.2.8 `version`
```sql
描述：
    当前Hive版本函数
语法：
    version()
参数类型：
    无
返回值类型：
    string
说明：
    返回当前Hive版本
举例：
    select version()
    结果：'3.1.0'
```
### 5.2.9 `uuid`
```sql
描述：
    生成通用唯一识别码
语法：
    uuid()
参数类型：
    无
返回值类型：
    string
说明：
    返回一个通用唯一识别码
举例：
    select uuid()
    结果：'c6d6e3a0-4b1e-4b4d-8b1e-4b4d8b1e4b4d'
```
### 5.2.10 `restrict_information_schema`
```sql
描述：
    指示数据库架构是否启用了restrict模式
语法：
    restrict_information_schema()
参数类型：
    无
返回值类型：
    boolean
说明：
    返回逻辑值，指示数据库架构是否启用了restrict模式
举例：
    select restrict_information_schema()
    结果：false
```